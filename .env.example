# TotalImage Environment Configuration
# Copy this file to .env and customize for your deployment

# =============================================================================
# Web Server Configuration
# =============================================================================

# Address to bind the web server (default: 127.0.0.1:3000)
# Use 0.0.0.0 for container deployments
TOTALIMAGE_WEB_ADDR=0.0.0.0:3000

# Cache directory for metadata (default: $HOME/.cache/totalimage)
TOTALIMAGE_CACHE_DIR=/var/cache/totalimage

# =============================================================================
# MCP Server Configuration
# =============================================================================

# MCP server port (default: 3002)
TOTALIMAGE_MCP_PORT=3002

# MCP server address (default: 127.0.0.1)
TOTALIMAGE_MCP_ADDR=0.0.0.0

# Enable WebSocket support (default: true)
MCP_WEBSOCKET_ENABLED=true

# Tool name for Fire Marshal registration
TOTALIMAGE_TOOL_NAME=totalimage

# =============================================================================
# MCP Authentication Configuration
# =============================================================================

# Enable authentication (default: false)
MCP_AUTH_ENABLED=true

# JWT Configuration (choose one method)
# Option 1: Symmetric secret
MCP_JWT_SECRET=your-secret-key-here-minimum-32-chars

# Option 2: Asymmetric keys (RS256/ES256)
# MCP_JWT_PUBLIC_KEY=/path/to/public.pem
# MCP_JWT_ALGORITHM=RS256

# JWT validation settings
MCP_JWT_ISSUER=totalimage
MCP_JWT_AUDIENCE=totalimage-api

# API Key authentication (comma-separated)
# MCP_API_KEYS=key1,key2,key3

# =============================================================================
# Web Server Authentication Configuration
# =============================================================================

# Enable authentication for web API (default: false)
TOTALIMAGE_WEB_AUTH_ENABLED=true

# JWT Configuration for web API
# Option 1: Symmetric secret
TOTALIMAGE_WEB_JWT_SECRET=your-web-secret-key-minimum-32-chars

# Option 2: Asymmetric keys (RS256/ES256)
# TOTALIMAGE_WEB_JWT_PUBLIC_KEY=/path/to/public.pem
# TOTALIMAGE_WEB_JWT_ALGORITHM=RS256

# JWT validation settings
TOTALIMAGE_WEB_JWT_ISSUER=totalimage
TOTALIMAGE_WEB_JWT_AUDIENCE=totalimage-web

# API Key authentication (comma-separated)
# TOTALIMAGE_WEB_API_KEYS=webkey1,webkey2

# =============================================================================
# Fire Marshal Configuration
# =============================================================================

# Fire Marshal server URL
FIRE_MARSHAL_URL=http://fire-marshal:3001

# Rate limiting (requests per second, default: 100)
FIRE_MARSHAL_RATE_LIMIT=100

# Request timeout in milliseconds (default: 30000)
FIRE_MARSHAL_TIMEOUT=30000

# Fire Marshal server port (default: 3001)
FIRE_MARSHAL_PORT=3001

# Fire Marshal server address (default: 127.0.0.1)
FIRE_MARSHAL_ADDR=0.0.0.0

# =============================================================================
# Logging Configuration
# =============================================================================

# Log level: trace, debug, info, warn, error
RUST_LOG=info

# Structured logging format: json, pretty
RUST_LOG_FORMAT=json

# =============================================================================
# Security Limits
# =============================================================================

# Maximum file size for extraction (bytes, default: 1GB)
TOTALIMAGE_MAX_EXTRACT_SIZE=1073741824

# Maximum allocation size for buffers (bytes, default: 256MB)
TOTALIMAGE_MAX_ALLOCATION=268435456

# Maximum cache entries (default: 1000)
TOTALIMAGE_MAX_CACHE_ENTRIES=1000

# Cache TTL in seconds (default: 3600)
TOTALIMAGE_CACHE_TTL=3600

# =============================================================================
# TLS Configuration (optional)
# =============================================================================

# Enable TLS (default: false)
# TOTALIMAGE_TLS_ENABLED=true

# TLS certificate path
# TOTALIMAGE_TLS_CERT=/etc/ssl/certs/totalimage.crt

# TLS private key path
# TOTALIMAGE_TLS_KEY=/etc/ssl/private/totalimage.key

# =============================================================================
# Docker/Kubernetes Specific
# =============================================================================

# Data directory for disk images (read-only mount)
TOTALIMAGE_DATA_DIR=/data/images

# Temporary directory for operations
TOTALIMAGE_TEMP_DIR=/tmp/totalimage
